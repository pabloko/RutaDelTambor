<!DOCTYPE html>
<html>
<head>
		<title>Ruta del Tambor y bombo</title>
	 	<meta charset="utf-8" />
</head>

<body style="margin:0px;padding:0px;overflow:hidden; background:#000;" onload="init();" >
    <iframe id="frame" src="offline/portada.html" frameborder="0" style="overflow:hidden;overflow-x:hidden;overflow-y:hidden;height:100%;width:100%;position:absolute;top:0px;left:0px;right:0px;bottom:0px" height="100%" width="100%">
    </iframe>


		<script type="text/javascript" src="phonegap.js"></script>
        <script type="text/javascript" src="PushNotification.js"></script>
        <script type="text/javascript">

			function init() {
			    document.addEventListener("deviceready", initPushwoosh, true);
			}

	        function initPushwoosh()
			{
			    var pushNotification = window.plugins.pushNotification;
			    pushNotification.onDeviceReady();
			 	
			    pushNotification.registerDevice({ projectid: "45641974724", appid : "5C4DC-94116", language : "en" },
			        function(status) {
			            var pushToken = status;
			            //alert('push token: ' + pushToken);
			        },
			        function(status) {
			            //alert(JSON.stringify(['failed to register ', status]));
			        }
			    );
			 	
			    document.addEventListener('push-notification', function(event) {
			        var title = event.notification.title;
				    //var userData = event.notification.userdata;
				    var msg = event.notification.message;
				    window.location = "http://www.rutadeltamborybombo.com/push";
				    //document.getElementById('frame').src = "http://www.rutadeltamborybombo.com/push";
				    //navigator.notification.alert(msg);
			    });

			    checkConnection();

			    document.addEventListener("backbutton", function(e)
				{
						e.preventDefault();
						navigator.app.exitApp();
					
				}, false);
			}

			function checkConnection() {
		        var networkState = navigator.network.connection.type;

		        var states = {};
		    states[Connection.UNKNOWN]  = 1;
		    states[Connection.ETHERNET] = 1;
		    states[Connection.WIFI]     = 1;
		    states[Connection.CELL_2G]  = 1;
		    states[Connection.CELL_3G]  = 1;
		    states[Connection.CELL_4G]  = 1;
		    states[Connection.NONE]     = 0;

		        //alert('Tipo de conexi√≥n: ' + states[networkState]);

		        if (states[networkState]==1) {
		        	window.location = "http://www.rutadeltamborybombo.com";
		        	//document.getElementById('frame').src = "http://www.rutadeltamborybombo.com";
		        } else {
		        	window.location = "offline/index.html";
		        }
		    }


			
        </script>

</body>
</html>